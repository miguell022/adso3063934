<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12-Challenge-memory-game</title>
    <link rel="shortcut icon" href="jquery.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/master.css">
    <style>
        section.section {
            width: 51% !important;
            max-width: 600px !important;
            margin: 0 auto !important;
            padding: 2rem !important;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        /* Fondo decorativo con patrones */
        section.section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            background-size: 20px 20px;
            z-index: 1;
        }

        .game {
            max-width: 700px;
            margin: 0 auto;
            padding: 1.5rem;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .game h4 {
            color: #fff;
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF6347);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            }

            to {
                text-shadow: 0 0 30px rgba(255, 165, 0, 1), 0 0 40px rgba(255, 99, 71, 0.8);
            }
        }

        .game p {
            color: #fff;
            margin-bottom: 2rem;
            font-size: 1.3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6);
            font-weight: 600;
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.2rem;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #2c3e50, #3498db);
            border-radius: 20px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease, box-shadow 0.3s ease;
            border: 4px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            min-height: 120px;
        }

        .card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.matched {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            cursor: default;
            border-color: #27ae60;
            box-shadow: 0 15px 35px rgba(39, 174, 96, 0.5);
            animation: matchPulse 0.6s ease-in-out;
        }

        @keyframes matchPulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 16px;
            overflow: hidden;
        }

        .card-front {
            background: linear-gradient(135deg, #667eea, #764ba2);
            font-size: 3rem;
            color: white;
        }

        .card-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 16px;
        }

        .card-back {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            transform: rotateY(180deg);
            padding: 8px;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .card-back img {
            width: 92%;
            height: 92%;
            object-fit: cover;
            border-radius: 50%;
            padding: 6px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            /* ✅ AGREGADA: Ajuste automático de tamaño */
            object-position: center;
            min-width: 100px;
            min-height: 100px;
        }

        /* ✅ AGREGAR: Ajustes específicos para imágenes pequeñas */
        .card-back img[alt="mario.png"],
        .card-back img[alt="Peach.png"] {
            transform: scale(1.3);
            object-fit: contain;
        }

        .reset {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }

        .reset:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(231, 76, 60, 0.6);
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.2);
            padding: 1.2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .game-stats div {
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .game-stats i {
            margin-right: 0.5rem;
            color: #FFD700;
            font-size: 1.3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .victory-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 3rem;
            border-radius: 25px;
            font-size: 1.8rem;
            display: none;
            z-index: 1000;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6);
            border: 3px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(20px);
        }

        /* Responsive mejorado */
        @media (max-width: 768px) {
            .cards {
                grid-template-columns: repeat(3, 1fr);
                gap: 1rem;
                max-width: 400px;
            }

            .card {
                min-height: 100px;
            }

            .game-stats {
                flex-direction: column;
                gap: 1rem;
                font-size: 1.2rem;
            }

            .game h4 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 480px) {
            .cards {
                grid-template-columns: repeat(2, 1fr);
                max-width: 300px;
            }

            section.section {
                padding: 1rem !important;
            }
        }
    </style>
</head>

<body class="jquery">
    <nav class="nav">
        <a href="index.html">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                <path
                    d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" />
            </svg>
        </a>
    </nav>
    <main>
        <header class="header">
            <h1>12 - Challenge Memory Game</h1>
            <h2>Build a memory game using jQuery.</h2>
        </header>
        <section class="section">
            <div class="game">
                <h4>Memory Game</h4>
                <p>Selecciona cualquier tarjeta para voltearla, encuentra todas sus pares para ganar!</p>
                <div class="cards">
                    <!-- Las cartas se generarán dinámicamente aquí -->
                </div>
                <button class="reset">🔄 Reset Game</button>
            </div>
        </section>
    </main>
    <script src="js/jquery-3.7.1.min.js"></script>
    <script>
        $(document).ready(function () {
            // 🎮 Array con los nombres exactos de tus imágenes
            const characters = [
                'bowser.png',
                'Donkey_Kong.png',
                'Luigi.png',
                'mario.png',
                'Peach.png',
                'Toad.png'
            ];

            // 🎯 Variables del juego
            let cards = [];
            let firstCard = null;
            let secondCard = null;
            let lockBoard = false;
            let matches = 0;
            let moves = 0;
            let timer = 0;
            let gameTimer = null;
            let gameStarted = false;

            // 🎯 Función para mostrar preview 
            function showPreview() {
                $('.card').addClass('flipped');
                lockBoard = true;
                setTimeout(() => {
                    $('.card').removeClass('flipped');
                    lockBoard = false;
                }, 3000);
            }

            // 🔄 Función para mezclar el array
            function shuffleArray(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            }

            // 🎯 Manejar clic en carta
            function handleCardClick() {
                if (lockBoard) return;
                if ($(this).hasClass('flipped') || $(this).hasClass('matched')) return;

                if (!gameStarted) {
                    startTimer();
                    gameStarted = true;
                }

                $(this).addClass('flipped');

                if (!firstCard) {
                    firstCard = $(this);
                    return;
                }

                secondCard = $(this);
                lockBoard = true;
                moves++;
                $('#moves').text(moves);
                checkForMatch();
            }

            // ✅ Verificar si las cartas coinciden
            function checkForMatch() {
                const isMatch = firstCard.data('character') === secondCard.data('character');

                if (isMatch) {
                    setTimeout(() => {
                        disableCards();
                        matches++;
                        $('#matches').text(matches);
                        if (matches === 6) {
                            gameWon();
                        }
                    }, 500);
                } else {
                    setTimeout(() => {
                        unflipCards();
                    }, 1000);
                }
            }

            // 🎉 Desactivar cartas que coinciden
            function disableCards() {
                firstCard.addClass('matched');
                secondCard.addClass('matched');
                resetBoard();
            }

            // 🔄 Voltear cartas que no coinciden
            function unflipCards() {
                firstCard.removeClass('flipped');
                secondCard.removeClass('flipped');
                resetBoard();
            }

            // 🎯 Resetear el tablero
            function resetBoard() {
                [firstCard, secondCard, lockBoard] = [null, null, false];
            }

            // 🎉 Función cuando se gana el juego
            function gameWon() {
                clearInterval(gameTimer);
                $('#victoryMessage').html(`
            <h2>🎉 ¡Felicidades!</h2>
            <p>¡Has encontrado todos los pares de Mario Bros!</p>
            <p><i class="fas fa-stopwatch"></i> Tiempo: ${timer} segundos</p>
            <p><i class="fas fa-hand-pointer"></i> Movimientos: ${moves}</p>
            <button onclick="$('.victory-message').hide(); initGame();" 
                    style="margin-top: 1rem; padding: 0.8rem 1.5rem; background: linear-gradient(135deg, #4ecdc4, #44a08d); 
                           color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold;">
                <i class="fas fa-play"></i> Jugar de nuevo
            </button>
        `).show();
            }

            // ⏰ Iniciar cronómetro
            function startTimer() {
                gameTimer = setInterval(() => {
                    timer++;
                    $('#timer').text(timer);
                }, 1000);
            }

            // 📊 Resetear estadísticas
            function resetStats() {
                matches = 0;
                moves = 0;
                timer = 0;
                gameStarted = false;
                $('#moves').text(moves);
                $('#timer').text(timer);
                $('#matches').text(matches);
                $('.victory-message').hide();
                clearInterval(gameTimer);
                firstCard = null;
                secondCard = null;
                lockBoard = false;
            }

            // 🎮 Función para inicializar el juego
            function initGame() {
                console.log('Iniciando juego...'); // Para debug

                cards = [...characters, ...characters];
                cards = shuffleArray(cards);

                // Agregar estadísticas
                if ($('.game-stats').length === 0) {
                    $('.game').prepend(`
                <div class="game-stats">
                    <div><i class="fas fa-stopwatch"></i> Tiempo: <span id="timer">0</span>s</div>
                    <div><i class="fas fa-hand-pointer"></i> Movimientos: <span id="moves">0</span></div>
                    <div><i class="fas fa-star"></i> Pares: <span id="matches">0</span>/6</div>
                </div>
            `);
                }

                // Crear mensaje de victoria
                if ($('.victory-message').length === 0) {
                    $('body').append('<div class="victory-message" id="victoryMessage"></div>');
                }

                // Limpiar tablero
                $('.cards').empty();

                // ✅ CREAR CARTAS - ESTA ES LA PARTE IMPORTANTE
                cards.forEach((character, index) => {
                    const card = $(`
                <div class="card" data-character="${character}" data-index="${index}">
                    <div class="card-front">
                        <img src="images/Super_Mario__Fondo.png" alt="Card Back">
                    </div>
                    <div class="card-back">
                        <img src="images/${character}" alt="${character}">
                    </div>
                </div>
            `);
                    $('.cards').append(card);
                });

                resetStats();
                $('.card').on('click', handleCardClick);
                $('.reset').on('click', initGame);

                setTimeout(() => {
                    showPreview();
                }, 800);

                console.log('Cartas creadas:', $('.card').length); // Para debug
            }

            // 🚀 INICIAR EL JUEGO
            initGame();
        });
    </script>
</body>

</html>